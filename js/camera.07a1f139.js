(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["camera"],{"409a":function(t,e,a){},"40cd":function(t,e,a){"use strict";a("c1fa")},"6c23":function(t,e,a){"use strict";a("409a")},a813:function(t,e,a){t.exports=a.p+"img/111.aa2c830b.png"},c1fa:function(t,e,a){},d252:function(t,e,a){"use strict";a("d8cf")},d8cf:function(t,e,a){},f64d:function(t,e,a){"use strict";a.r(e);var i=a("7a23");const c=Object(i["I"])("data-v-710c53d4");Object(i["w"])("data-v-710c53d4");const s={class:""},o={key:0},n={key:1},r=Object(i["i"])("img",{src:"",id:"img",alt:""},null,-1);Object(i["u"])();const d=c((t,e,a,c,d,u)=>{const b=Object(i["B"])("camera");return Object(i["t"])(),Object(i["f"])("div",s,[Object(i["i"])("div",null,[Object(i["i"])("button",{onClick:e[1]||(e[1]=(...t)=>u.takePhoto&&u.takePhoto(...t))},"上传")]),d.readTake?(Object(i["t"])(),Object(i["f"])("div",{key:0,class:{startTake:d.readTake}},[d.isCamera1?(Object(i["t"])(),Object(i["f"])("div",o,[Object(i["i"])(b)])):(Object(i["t"])(),Object(i["f"])("div",n,[Object(i["i"])("input",{id:"takepicture",type:"file",accept:"image/*",capture:"camera",onChange:e[2]||(e[2]=t=>u.chooseImg(t))},null,32),r]))],2)):Object(i["g"])("",!0)])});var u=a("a813"),b=a.n(u);const l=Object(i["I"])("data-v-40913e63");Object(i["w"])("data-v-40913e63");const m={class:"bg_black"},v={key:0,class:"box"},h=Object(i["i"])("video",{id:"video",autoplay:"autoplay"},null,-1),g={key:0,src:b.a,alt:"",id:"kuan"},O={key:1,class:"img_box"},j=Object(i["i"])("img",{src:"",id:"img",alt:""},null,-1),k={class:"tools"},f=Object(i["i"])("canvas",{id:"canvas"},null,-1);Object(i["u"])();const p=l((t,e,a,c,s,o)=>(Object(i["t"])(),Object(i["f"])("div",m,[Object(i["i"])("div",null,[s.isTake?Object(i["g"])("",!0):(Object(i["t"])(),Object(i["f"])("div",v,[h,s.showK?(Object(i["t"])(),Object(i["f"])("img",g)):Object(i["g"])("",!0),Object(i["i"])("button",{class:"take_phone",onClick:e[1]||(e[1]=(...t)=>o.takePhoto&&o.takePhoto(...t))},"拍照")])),s.isTake?(Object(i["t"])(),Object(i["f"])("div",O,[j,Object(i["i"])("div",k,[Object(i["i"])("button",{class:"re_take",onClick:e[2]||(e[2]=(...t)=>o.reTake&&o.reTake(...t))},"重拍"),Object(i["i"])("button",{class:"confirm",onClick:e[3]||(e[3]=(...t)=>o.submit&&o.submit(...t))},"确定")])])):Object(i["g"])("",!0),f])])));var w={data(){return{rate:.75,isTake:!1,showK:!1,currPhoto:null}},components:{},computed:{},mounted(){this.getMedia()},methods:{getMedia(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=t=>{var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return new Promise((function(a,i){e.call(navigator,t,a,i)}))}),navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(t=>{var e=document.querySelector("video");"srcObject"in e?e.srcObject=t:e.src=window.URL.createObjectURL(t),e.onloadedmetadata=t=>{e.play(),this.showK=!0,this.rate=e.videoHeight/e.videoWidth}}).catch(t=>{})},takePhoto(){this.showK=!1;let t=document.getElementById("video"),e=document.getElementById("canvas"),a=e.getContext("2d");var i=window.screen.width,c=i*this.rate;e.setAttribute("width",i),e.setAttribute("height",c),a.clearRect(0,0,i,c),a.drawImage(t,0,0,i,c),this.currPhoto=e.toDataURL("image/png"),this.isTake=!0,this.$nextTick(()=>{document.getElementById("img").src=this.currPhoto})},reTake(){this.currPhoto=null,this.isTake=!1,this.getMedia()},submit(){this.currPhoto}}};a("d252"),a("6c23");w.render=p,w.__scopeId="data-v-40913e63";var T=w,y={data(){return{readTake:!1,isCamera1:!1,isIos:!1,isSuport:!1}},components:{camera:T},computed:{},created(){var t=navigator.userAgent;this.isIos=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),(navigator.mediaDevices||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)&&(this.isSuport=!0)},methods:{chooseImg(t){if(0!=t.target.files.length){var e=t.target.files[0],a=new FileReader;a.readAsDataURL(e),a.onload=function(t){document.getElementById("img").src=t.currentTarget.result}}},takePhoto(){this.readTake=!0,this.$nextTick(()=>{this.isIos||!this.isSuport?(this.isCamera1=!1,this.$nextTick(()=>{document.getElementById("takepicture").click()})):this.isCamera1=!0})}}};a("40cd");y.render=d,y.__scopeId="data-v-710c53d4";e["default"]=y}}]);
//# sourceMappingURL=camera.07a1f139.js.map